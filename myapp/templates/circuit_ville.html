{%extends 'base2.html' %}
{% load static %}

{%block style%}
<!-- css leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
    integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
    crossorigin="" />
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
<!-- <style>
    * {
        margin: 0;
        padding: 0;
        font-family: Arial, Helvetica, sans-serif;
    }

    body {
        background-color: #ffffff;
    }


    /* div,
    aside {
        border: 1px solid black;
    } */
    header {
        background-color: #dac931;
    }

    p {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 18px;
        line-height: 1.6;
        color: #490505;
        background-color: #ffffff;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
    }

    h3 {
        font-size: 24px;
        font-weight: bold;
        color: #333;
        text-transform: uppercase;
        text-align: left;
        margin: 20px 0;
        border-bottom: 2px solid #e7e2e2;
        padding-bottom: 10px;
    }




    .section_map {
        height: 400px;
    }
    .item_section{
        margin-top: 5px;
    }

    .fldk {
        color: #D4C49A;
    }

    .left {
        background-color: #D4C49A;
        width: 30%;
        border-right: 12px solid rgb(211, 207, 207);
        height: 100%;
    }

    .imgg {
        margin-top: 180px;
        background-color: #338822;
        max-width: 80%;
        height: 60%;
    }

    .imggg {
        margin-top: 100px;
    }

    .right {
        background-color: #ffffff;
        width: 70%;
        height: 100%;
    }

    .itinerary_item {
        padding-top: 2px;
        padding-left: 5%;
        padding-right: 5%;
    }

    /* css for map  */
    #mapid {
        height:500px;
        font-size: 10px;
        width: 900rem;
    }

    .scrollable {
        max-height: 100%;
        overflow-y: scroll;
    }
.iteme_info{
    padding-top: 0px;
    margin-top: 0px;
}

    /* .leaflet-routing-container {
        display: none;
    } */
</style> -->
<title>Bootstrap Personal Portfolio Template For Free by Binary Theme</title>
<!--GOOGLE FONT -->
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<!--BOOTSTRAP MAIN STYLES -->
<link href="{% static 'assets1/css/bootstrap.css' %}" rel="stylesheet" />
<!--FONTAWESOME MAIN STYLE -->
<link href="{% static 'assets1/css/font-awesome.min.css' %}" rel="stylesheet" />
<!--CUSTOM STYLE -->
<link href="{% static 'assets1/css/style.css' %}" rel="stylesheet" />
<style>
    .taget_image_with_more_dis {
        margin-top: 10px;
        height: 50%;
        width: 100%;
        object-fit: cover;
        border-radius: 5%;
        box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.4);
        filter: saturate(1.2);
        filter: brightness(1.2);
        filter: contrast(1.5);
    }

    .padtop {
        margin-top: 80px;
    }

* {
    margin: 0;
    padding: 0;
    font-family: Arial, Helvetica, sans-serif;
}

body {
    background-color: #ffffff;
}



header {
    background-color: #dac931;
}

/* p {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-size: 18px;
    line-height: 1.6;
    color: #490505;
    background-color: #ffffff;
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
}

h3 {
    font-size: 24px;
    font-weight: bold;
    color: #333;
    text-transform: uppercase;
    text-align: left;
    margin: 20px 0;
    border-bottom: 2px solid #e7e2e2;
    padding-bottom: 10px;
}
 */



.section_map {
    height: 400px;
}
.item_section{
    margin-top: 5px;
}

.fldk {
    color: #D4C49A;
}

.left {
    background-color: #D4C49A;
    width: 30%;
    border-right: 12px solid rgb(211, 207, 207);
    height: 100%;
}

.imgg {
    margin-top: 180px;
    background-color: #338822;
    max-width: 80%;
    height: 60%;
}

.imggg {
    margin-top: 100px;
}

.right {
    background-color: #ffffff;
    width: 70%;
    height: 100%;
}

.itinerary_item {
    padding-top: 2px;
    padding-left: 5%;
    padding-right: 5%;
}
/* css for image   */
.img-margin-product{
    width:2px;
    height:10;
}
.overlay {
			position: absolute;
			bottom: 0;
			background: rgb(170, 169, 164);
			background: rgba(0, 0, 0, 0.5);
			/* Black see-through */
			color: #f1f1f1;
			width: 95%;
			height: 19%;
			transition: .5s ease;
			color: white;
			font-size: 20px;
			padding: 20px;
			text-align: center;
			opacity: 0.4;
		}

		.container:hover .overlay {
			opacity: 1;
			display: block;
			
		}

/* css for map  */


#mapid {
    height: 100vh;
    width: 100vw;
    background-color: #878bb8;
    border: 1px solid gray;
    font-size: 10px;
}
/* nav bar for leafleat  */
.leaflet-routing-container,
    .leaflet-bar,
    .leaflet-control {
      display: none; /* Hide the navigation elements */
    }

.scrollable {
    max-height: 100%;
    overflow-y: scroll;
}
.iteme_info{
padding-top: 0px;
margin-top: 0px;
}

/* .leaflet-routing-container {
    display: none;
} */
</style>

{%endblock%}





{%block content %}
<!-- start partie 1 de projet -->
<div id="mapid"></div>
<!-- end partie 1 de projet -->

<!-- start part 2 de projet -->
<div >
    <hr>
    <hr>
    <div class="container">
        <div class="row main-top-margin text-center" data-scrollreveal="enter top and move 100px, wait 0.3s">
            <div class="col-md-8 col-md-offset-2 ">
                {{cities}}
                <h1>destination darra tafilalt </h1>

                <h4>
                    Bienvenue dans la magnifique destination {{ destination.nom_dest }} où la beauté ne connaît
                    aucune limite Préparez-vous à vivre une expérience exceptionnelle dans
                    darra tafilalt
                </h4>
            </div>
        </div>
                    <!-- ./ Main Heading-->

                {% for city in cities %}
                    <hr />
                    <div id="information" class="row main-low-margin">
                        <div class="col-md-12  col-md-offset-1 ">
                            <div class="col-md-6 col-sm-4 padtop" data-scrollreveal="enter left and move 100px, wait 0.8s">
                                <a href="">
                                <img class="taget_image_with_more_dis"
                                    src="{% static 'assets/images/img/villes/' %}{{ city.image1 }}" alt="">
                                    <div class="overlay"> voire plue de details {{ city.ville_id }}</div>
                                </a>
                            </div>
                            <div  class="col-md-6 " data-scrollreveal="enter right and move 100px, wait 0.4s">
                                <h4> <strong class="color-red">information sur "{{ city.ville_name }}" </strong></h4>
                                <p><b>Ville: </b>{{ city.description }}</p>
                                <p>{{ city.description|truncatechars:4 }}</p>
                            </div>
        
                    </div>
                    <!-- ./ Row Content-->
                {% endfor %}
                <hr />
                    <div id="localisation" class="row main-low-margin bottam-pad"> <br><br><br>
                        
                        <div  class="col-md-10  col-md-offset-1 ">
                            <div class="col-md-8 " data-scrollreveal="enter left and move 100px, wait 0.4s">
                                <h4> <strong class="color-red">Position de "{{ destination.nom_dest }}" </strong></h4>
                                {{ destination.carte_dest|safe }}
        
                                <p>
                                    <i class="fa fa-check"></i> Geographic Information<br />
                                    <i class="fa fa-check"></i> latitude : {{ destination.latitude }} <br />
                                    <i class="fa fa-check"></i> longitude : {{ destination.longitude }}<br />
                                    <i class="fa fa-check"></i> place_id : {{place_id}}<br />
                                </p>
                                <a href=" {{ destination.localisation_dest }}" class="btn btn-danger"> map info</a>
                            </div>
                            <div class="col-md-4 " data-scrollreveal="enter right and move 100px, wait 0.4s">
        
                                <img class="img-margin-product"
                                    src="{% static 'assets/images/img/destinations/' %}{{ destination.image_dest3 }}" alt="">
                            </div>
                        </div>
                    </div>
                    <!-- ./ Row Content-->
    </div>
</div>

<!-- end part 2 de projet  -->

{%endblock%}












{%block scripts%}

<script src="{% static 'assets1/js/jquery.js' %}"></script>
<!-- CORE BOOTSTRAP LIBRARY -->
<script src="{% static 'assets1/js/bootstrap.min.js' %}"></script>
<!-- SCROLL REVEL LIBRARY FOR SCROLLING ANIMATIONS-->

<script src="{% static 'assets1/js/scrollReveal.js' %}"></script>
<!-- CUSTOM SCRIPT-->
<script src="{% static 'assets1/js/custom.js' %}"></script>

<!--  ************************************* -->
<!-- javascript leaflet -->
<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
    integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
    crossorigin=""></script>
<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
<!-- js pour le map -->
<script>
    console.log("Debut d'afficher les cities Marqueur");


/* */
var ordered_cities = [
    {% for city in ordered_cities %}
        {lat: '{{ city.lat }}', lng: '{{ city.lng }}', province: '{{ city.province }}' },
    {% endfor %}
];

var provinceMarkers = {
    'Zagora': L.icon({
        iconUrl: '{% static "/assets/images/img/icon/icon1.png" %}',
        iconSize: [30, 30]
    }),
    'Tinejdad': L.icon({
        iconUrl: '{% static "/assets/images/img/icon/icon2.png" %}',
        iconSize: [30, 30]
    }),
    'Tinghir': L.icon({
        iconUrl: '{% static "/assets/images/img/icon/icon3.png" %}',
        iconSize: [30, 30]
    }),
    'Rich': L.icon({
        iconUrl: '{% static "/assets/images/img/icon/icon4.png" %}',
        iconSize: [30, 30]
    }),
    'Ouarzazate': L.icon({
        iconUrl: '{% static "/assets/images/img/icon/icon3.png" %}',
        iconSize: [30, 30]
    }),
    'MeGouna': L.icon({
        iconUrl: '{% static "/assets/images/img/icon/icon3.png" %}',
        iconSize: [30, 30]
    }),
    'Goulmima': L.icon({
        iconUrl: '{% static "/assets/images/img/icon/icon2.png" %}',
        iconSize: [30, 30]
    }),
    'Errissani': L.icon({
        iconUrl: '{% static "/assets/images/img/icon/icon2.png" %}',
        iconSize: [30, 30]
    }),
    'Errachidia': L.icon({
        iconUrl: '{% static "/assets/images/img/icon/icon2.png" %}',
        iconSize: [30, 30]
    }),
    'Boumalne Dadès': L.icon({
        iconUrl: '{% static "/assets/images/img/icon/icon3.png" %}',
        iconSize: [30, 30]
    }),
    'Midelt': L.icon({
        iconUrl: '{% static "/assets/images/img/icon/icon4.png" %}',
        iconSize: [30, 30]
    }),
    'Arfoud': L.icon({
        iconUrl: '{% static "/assets/images/img/icon/icon2.png" %}',
        iconSize: [30, 30]
    }),
    
    // Ajoutez les autres provinces avec leurs marqueurs respectifs
    // ...
};

// Create the Leaflet map and add a tile layer
var mymap = L.map('mapid').setView([31.9333, -4.4167], 8);
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap contributors'
}).addTo(mymap);

// Create an array of Leaflet markers from the cities data
var markers = ordered_cities.map(function (city) {
    var marker = L.marker(L.latLng(city.lat, city.lng), { icon: provinceMarkers[city.province] });
    marker.bindPopup(city.province);
    return marker;
});

// Add the markers to a marker group
var markerGroup = L.featureGroup(markers);

// Create an array of LatLng objects from the cities data
var latLngs = ordered_cities.map(function (city) {
    return L.latLng(city.lat, city.lng);
});

// Create a Leaflet Routing control and add it to the map
L.Routing.control({
    waypoints: latLngs,
    lineOptions: {
        styles: [{color: 'blue', opacity: 1, weight: 4}]
    },
    show: false, // Hide the default route line
    createMarker: function (i, waypoint) {
        // Create a custom marker for each waypoint
        return L.marker(waypoint.latLng, { icon: provinceMarkers[ordered_cities[i].province] });
    }
}).addTo(mymap);

// Add the marker group to the map
markerGroup.addTo(mymap);

console.log("Fin d'afficher les cities Marqueur");
</script>

{%endblock%}